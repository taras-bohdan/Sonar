language: node_js
node_js:
- '11'
env:
  global:
    - CXX=g++-4.8
jobs:  
  include:
    - stage: "Tests"                
      name: "Client tests"
      install:
      - cd $PROJECT_PART && yarn
      - npm install -g codecov
      script: yarn run lint && yarn run coverage
      env: PROJECT_PART=client
    - script: yarn run lint && yarn run coverage
      name: "Server Tests"
      env: PROJECT_PART=server
    - stage: "Sonar"
      name: "Sonar analyzer"
      script: sonar-scanner
    - stage: "Codecov"
      name: "Codecov"
      script: codecov
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-4.8
      - libpcap-dev
  sonarcloud:
    organization: "tbohdanxdr-github"
    token:
      secure: 1af810b9512f20a1bc8ab38475f728b3aa841499
  
